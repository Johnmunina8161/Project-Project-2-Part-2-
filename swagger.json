{
  "openapi": "3.0.0",
  "info": {
    "title": "Student & Courses API",
    "description": "API for managing students and courses with OAuth authentication",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "/",
      "description": "Current server (localhost or Render)"
    }
  ],
  "paths": {
    "/api/students": {
      "get": {
        "summary": "Get all students",
        "responses": {
          "200": {
            "description": "List of students",
            "content": {
              "application/json": {
                "examples": {
                  "students": {
                    "value": [
                      {
                        "_id": "65a1f1a1a1a1a1a1a1a1a1a1",
                        "name": "John Doe",
                        "email": "john@example.com",
                        "age": 20
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a student (Protected)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "email"],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "string",
                    "example": "john@example.com"
                  },
                  "age": {
                    "type": "integer",
                    "example": 20
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Student created" },
          "400": { "description": "Invalid input" },
          "401": { "description": "Unauthorized" }
        }
      }
    },
    "/api/students/{id}": {
      "put": {
        "summary": "Update a student (Protected)",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "email": { "type": "string" },
                  "age": { "type": "integer" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Student updated" },
          "400": { "description": "Invalid input" },
          "401": { "description": "Unauthorized" }
        }
      },
      "delete": {
        "summary": "Delete a student (Protected)",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Student deleted" },
          "401": { "description": "Unauthorized" }
        }
      }
    },
    "/api/courses": {
      "get": {
        "summary": "Get all courses",
        "responses": {
          "200": {
            "description": "List of courses",
            "content": {
              "application/json": {
                "examples": {
                  "courses": {
                    "value": [
                      {
                        "_id": "65a2f2b2b2b2b2b2b2b2b2b2",
                        "title": "Web Services",
                        "code": "CSE341",
                        "credits": 3
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a course",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["title"],
                "properties": {
                  "title": {
                    "type": "string",
                    "example": "Web Services"
                  },
                  "code": {
                    "type": "string",
                    "example": "CSE341"
                  },
                  "credits": {
                    "type": "integer",
                    "example": 3
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Course created" },
          "400": { "description": "Invalid input" }
        }
      }
    },
    "/api/courses/{id}": {
      "put": {
        "summary": "Update a course",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": { "type": "string" },
                  "code": { "type": "string" },
                  "credits": { "type": "integer" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Course updated" },
          "400": { "description": "Invalid input" }
        }
      },
      "delete": {
        "summary": "Delete a course",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Course deleted" }
        }
      }
    },
    "/auth/google": {
      "get": {
        "summary": "Login with Google OAuth",
        "responses": {
          "302": { "description": "Redirect to Google OAuth" }
        }
      }
    },
    "/auth/google/callback": {
      "get": {
        "summary": "Google OAuth callback",
        "responses": {
          "302": { "description": "Redirect after authentication" }
        }
      }
    },
    "/auth/logout": {
      "get": {
        "summary": "Logout user",
        "responses": {
          "200": { "description": "User logged out" }
        }
      }
    }
  }
}
